credentials:
  system:
    domainCredentials:
    - credentials:
      - usernamePassword:
          scope: GLOBAL
          id: "bitbucket"
          username: "${BB_USER}"
          password: "${BB_PASS}" #Load from Environment Variable
          description: "Bitbucket Credentials"
jenkins:
  agentProtocols:
    - JNLP4-connect
    - Ping
  authorizationStrategy:
    projectMatrix:
      permissions:
        - "Overall/Read:authenticated"
        - "Overall/Administer:poet-pipeline-admin"
        - "Overall/Administer:anonymous"
  disableRememberMe: false
  globalNodeProperties:
  - envVars:
      env:
      - key: PIPELINE_INTERNAL_TEMPLATES
        value: |-
                {"uri":"https://{{BB_URL}}/scm/poet/sre-pipeline-templates.git","label":"master","credentials":{ "id":"bitbucket" }}
  mode: NORMAL
  numExecutors: 1
  labelString: master
  primaryView:
    all:
      name: all
  quietPeriod: 5
  scmCheckoutRetryCount: 0
  slaveAgentPort: |-
    {{AGENT_PORT}}
  views:
  - all:
      name: all
unclassified:
  bitbucketEndpointConfiguration:
    endpoints:
    - bitbucketServerEndpoint:
        credentialsId: bitbucket
        displayName: Bitbucket
        manageHooks: true
        serverUrl: "https://{{BB_URL}}"
  globalLibraries:
    libraries:
    - name: poet-pipeline
      retriever:
        modernSCM:
          scm:
            git:
              credentialsId: bitbucket
              id: "poetpipeline"
              remote: "https://{{BB_URL}}/scm/poet/sre-pipeline.git"
  location:
    adminAddress: "{{JENKINS_ADMIN_ADDRESS}}"
    url: "{{JENKINS_URL}}"
